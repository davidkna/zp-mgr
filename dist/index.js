"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function i(a,r){try{var u=t[a](r),o=u.value}catch(e){return void n(e)}return u.done?void e(o):Promise.resolve(o).then(function(e){i("next",e)},function(e){i("throw",e)})}return i("next")})}}exports.__esModule=!0,exports.Plugin=exports.paths=void 0;var _path=require("path"),_path2=_interopRequireDefault(_path),_execa=require("execa"),_execa2=_interopRequireDefault(_execa),_findupSync=require("findup-sync"),_findupSync2=_interopRequireDefault(_findupSync),_xdgBasedir=require("xdg-basedir"),_xdgBasedir2=_interopRequireDefault(_xdgBasedir);const e=exports.paths={downloadDir:_path2.default.join(_xdgBasedir2.default.data,"zsh-goggles"),configFile:_path2.default.join(_xdgBasedir2.default.config,"zsh-goggles","config.js"),sourceFile:_path2.default.join(_xdgBasedir2.default.data,"zsh-goggles","plugins.zsh")};class t{constructor(e){this.name=e,this.uniqueName=e.replace(/^.*\//,"")}getDownloadPath(){return _path2.default.join(e.downloadDir,this.uniqueName)}getFpath(){return this.getDownloadPath()}getSourceFile(){const e=[`${this.uniqueName}?(.plugin).?(z)sh`,"*.plugin.zsh","init.zsh","*.zsh","*.sh"];return(0,_findupSync2.default)(e,{cwd:this.getDownloadPath(),nocase:!0,maxdepth:0})}download(){var e=this;return _asyncToGenerator(function*(){yield(0,_execa2.default)("git",["clone","--recursive","--",`https://github.com/${e.name}.git`,e.getDownloadPath()])})()}update(){var e=this;return _asyncToGenerator(function*(){yield(0,_execa2.default)("git",["fetch","--all"],{cwd:e.getDownloadPath()}),yield(0,_execa2.default)("git",["reset","--hard","origin/master","--"],{cwd:e.getDownloadPath()})})()}}exports.Plugin=t;